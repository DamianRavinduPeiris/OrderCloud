function clearAll(){$("#heading2").css("display","none"),$(".buttonContainer2").css("display","none"),$("#itemTable").css("display","none"),$("#heading3").css("display","none"),$(".buttonContainer3").css("display","none"),$("#orderTable").css("display","none"),$("#heading4").css("display","none"),$(".invoiceContainer").css("display","none"),$("#heading1").css("display","none"),$(".buttonContainer").css("display","none"),$("#customerTable").css("display","none")}function showCustomers(){$("#heading1").css("display","block"),$(".buttonContainer").css("display","flex"),$("#customerTable").css("display","inline-table")}function showItems(){$("#heading2").css("display","block"),$(".buttonContainer2").css("display","flex"),$("#itemTable").css("display","inline-table"),$("#heading2").position("position","relative"),$("#heading2").css("top","150px"),$(".buttonContainer2").css("position","relative"),$(".buttonContainer2").css("top","150px"),$("#itemTable").css("position","relative"),$("#itemTable").css("top","200px"),addToItemTable()}function showOrders(){$("#heading3").css("display","block"),$(".buttonContainer3").css("display","flex"),$("#orderTable").css("display","inline-table"),$("#heading3").position("position","relative"),$("#heading3").css("top","100px"),$(".buttonContainer3").css("position","relative"),$(".buttonContainer3").css("top","150px"),$("#orderTable").css("position","relative"),$("#orderTable").css("top","200px")}clearAll(),showCustomers(),$("#homeButton").on("click",function(){window.location.reload()}),$("#manageCustomers").on("click",function(){clearAll(),showCustomers()}),$("#manageItems").on("click",function(){clearAll(),showItems()}),$("#manageOrders").on("click",function(){clearAll(),showOrders()});const data="CustomerData";let custArray=[];const clearTable=()=>{$("#customerTable tbody").empty()};function addToTable(){if(clearTable(),JSON.parse(localStorage.getItem(data))){custArray=JSON.parse(localStorage.getItem(data));for(let e=0;e<custArray.length;e++)$("#customerTable tbody").append("<tr><td>"+custArray[e].customer_id+"</td><td>"+custArray[e].customer_name+"</td><td>"+custArray[e].customer_address+"</td><td>Rs."+custArray[e].customer_salary+"</td></tr>")}else swal("OOPS!","No data to display!","warning")}$("#customerAddButton").on("click",function(){var e={customer_id:$("#cId").val(),customer_name:$("#cName").val(),customer_address:$("#cAddress").val(),customer_salary:$("#cSalary").val()};custArray.push(e),updateLocalStorage(custArray),addToTable(),swal("DONE!","Customer added successfully!\uD83D\uDCA1","success")}),addToTable(),$(document).on("keydown",function(e){e.ctrlKey&&68===e.which&&(localStorage.clear(),swal("DONE!","Local storage cleared successfully!\uD83D\uDCA1","success"),window.location.reload())}),$("#customerTable tbody tr").on("click",function(){var e={customer_id:$(this).find("td:eq(0)").text(),customer_name:$(this).find("td:eq(1)").text(),customer_address:$(this).find("td:eq(2)").text(),customer_salary:$(this).find("td:eq(3)").text()};$("#updateCustomerButton").trigger("click"),$("#uCId").val(e.customer_id),$("#uCName").val(e.customer_name),$("#uCAddress").val(e.customer_address),$("#uCSalary").val(e.customer_salary),$(this).remove()});const findId=e=>{for(let t=0;t<custArray.length;t++)if(custArray[t].customer_id==$(e).val())return t;return -1},findCustName=e=>{for(let t=0;t<custArray.length;t++)if(custArray[t].customer_name==$(e).val())return t;return -1};function updateCustomer(){var e={customer_id:$("#uCId").val(),customer_name:$("#uCName").val(),customer_address:$("#uCAddress").val(),customer_salary:$("#uCSalary").val()};let t=findId("#uCId");-1!=t?(custArray[t]=e,updateLocalStorage(custArray),addToTable(),swal("DONE!","Customer updated successfully!\uD83D\uDCA1","success")):invalidData()}function updateLocalStorage(e){localStorage.setItem(data,JSON.stringify(e))}function fetchData(){swal("DONE!","\uD83D\uDE80 Successfully fetched the data!","success").then(()=>{window.location.reload()})}$("#cUpdateButton").on("click",function(){updateCustomer()}),$("#deleteCustomer").on("click",function(){-1!=findId("#dCId")?(custArray.splice(findId("#dCId"),1),updateLocalStorage(custArray),addToTable(),swal("Done!","\uD83D\uDEA8 Customer deleted successfully!","success")):invalidData()}),$("#getAllCustomersButton").on("click",()=>{fetchData()}),$("#csButton").on("click",function(){$("#infoBody").empty(),event.preventDefault();-1!=findId("#cidField")?($("#exampleModal").modal("show"),$("#exampleModalLabel").text("Customer Details."),$("#infoBody").append($("<h3></h3>").text("CUSTOMER ID : "+custArray[findId("#cidField")].customer_id)),$("#infoBody").append($("<h3></h3>").text("CUSTOMER NAME : "+custArray[findId("#cidField")].customer_name)),$("#infoBody").append($("<h3></h3>").text("CUSTOMER ADDRESS : "+custArray[findId("#cidField")].customer_address)),$("#infoBody").append($("<h3></h3>").text("CUSTOMER SALARY : "+custArray[findId("#cidField")].customer_salary))):invalidData()}),$("#showInfo").css("display","none");var orderDetails,itemArray=[];const itemData="ItemData";function clearItemTable(){$("#itemTable tbody").empty()}function addToItemTable(){if(clearItemTable(),localStorage.getItem(itemData)){itemArray=JSON.parse(localStorage.getItem(itemData));for(let e=0;e<itemArray.length;e++)$("#itemTable tbody").append("<tr><td>"+itemArray[e].item_Id+"</td><td>"+itemArray[e].item_Name+"</td><td>"+itemArray[e].item_price+"</td><td>"+itemArray[e].item_qty+"</td></tr>")}}function updateItemLocalStorage(e){localStorage.setItem(itemData,JSON.stringify(e))}function findItemElementNo(e){for(let t=0;t<itemArray.length;t++)if(itemArray[t].item_Id===$(e).val())return t;return -1}addToItemTable(),$("#itemAddButton").on("click",function(){var e={item_Id:$("#iId").val(),item_Name:$("#iName").val(),item_price:$("#iPrice").val(),item_qty:$("#iQty").val()};itemArray.push(e),updateItemLocalStorage(itemArray),addToItemTable(),swal("DONE!","Item added successfully!\uD83D\uDCA1","success")}),$("#itemTable").on("click","tbody tr",function(){var e={item_id:$(this).find("td:eq(0)").text(),item_name:$(this).find("td:eq(1)").text(),item_price:$(this).find("td:eq(3)").text(),item_qty:$(this).find("td:eq(2)").text()};$("#updateItemButton").trigger("click"),$("#uIid").val(e.item_id),$("#uIname").val(e.item_name),$("#uIprice").val(e.item_price),$("#uIqty").val(e.item_qty),$(this).remove()}),$("#updatedItemsButton").on("click",function(){var e={item_Id:$("#uIid").val(),item_Name:$("#uIname").val(),item_price:$("#uIprice").val(),item_qty:$("#uIqty").val()};let t=findItemElementNo("#uIid");-1!=t?(itemArray[t]=e,updateItemLocalStorage(itemArray),addToItemTable(),swal("DONE!","Item updated successfully!\uD83D\uDCA1","success")):invalidData()}),$("#deleteItemButton").on("click",()=>{-1!=findItemElementNo("#iId2")?(itemArray.splice(findItemElementNo("#iId2"),1),updateItemLocalStorage(itemArray),addToItemTable(),swal("Done!","\uD83D\uDEA8 Item deleted successfully!","success")):invalidData()}),$("#getAllItemsButton").on("click",()=>{fetchData()}),$("#itemSearchButton").on("click",function(){$("#infoBody").empty();let e=findItemElementNo("#itemIdField");-1!=e?($("#exampleModal").modal("show"),$("#exampleModalLabel").text("Item Details."),$("#infoBody").append($("<h3></h3>").text("ITEM ID : "+itemArray[e].item_Id)),$("#infoBody").append($("<h3></h3>").text("ITEM NAME : "+itemArray[e].item_Name)),$("#infoBody").append($("<h3></h3>").text("ITEM PRICE  : "+itemArray[e].item_price)),$("#infoBody").append($("<h3></h3>").text("ITEM QTY : "+itemArray[e].item_qty))):invalidData()});var orderArray=[];const orderData="OrderData";function clearOrderTable(){$("#orderTable tbody").empty()}function addOrdersToTable(){if(clearOrderTable(),localStorage.getItem(orderData)){orderArray=JSON.parse(localStorage.getItem(orderData));for(let e=0;e<orderArray.length;e++)$("#orderTable tbody").append("<tr><td>"+orderArray[e].oId+"</td><td>"+orderArray[e].cId+"</td><td>"+orderArray[e].iId+"</td><td>"+orderArray[e].iName+"</td><td>"+orderArray[e].iPrice+"</td><td>"+orderArray[e].iQty+"</td><td>"+orderArray[e].total+"</td></tr>")}}function findOrderIds(e){for(let t=0;t<orderArray.length;t++)if(orderArray[t].oId==$(e).val())return t;return -1}function invalidData(e){e?swal("OOPS!",e,"error"):swal("OOPS!","Enter a valid ID.\uD83D\uDEA8","error")}function getOrderArray(e){var t=[];for(let r=0;r<orderArray.length;r++)orderArray[r].cId==e&&t.push(r);return t}function sendEmail(e,t,r){let a={message:"Your order summary as per below : ",customer_id:e,owner:"orderCloud",customer_name:t,total_in_invoice:r,customer_email:$("#emailBar").val(),reply_to:"drpeiris3@gmail.com"};emailjs.send("service_kvc2vmj","template_k5h2r7h",a).then(function(e){swal("Done!","Email sent successfully!\uD83D\uDCA1","success")},function(e){swal("OOPS!","Email sending failed!\uD83D\uDEA8","error")})}$("#aoButton").on("click",()=>{$("#cIdDropdown").empty(),custArray.forEach(function(e){$("#cIdDropdown").append("<li><a class='dropdown-item'>"+e.customer_id+"</a></li>")}),$("#iIdDropDown").empty(),$("#iNameDropDown").empty(),itemArray.forEach(function(e){$("#iIdDropDown").append("<li><a class='dropdown-item'>"+e.item_Id+"</a></li>"),$("#iNameDropDown").append("<li><a class='dropdown-item'>"+e.item_Name+"</a></li>")})}),$("#cIdDropdown ").on("click","li",function(){$("#cIdButton").empty(),$("#cIdButton").text($(this).text())}),$("#iIdDropDown").on("click","li",function(){$("#iIdButton").empty(),$("#iIdButton").text($(this).text())}),$("#iNameDropDown").on("click","li",function(){$("#iNameButton").empty(),$("#iNameButton").text($(this).text())}),$("#addOrderButton").on("click",()=>{orderDetails={oId:$("#oId").val(),cId:$("#cIdButton").text(),iId:$("#iIdButton").text(),iName:$("#iNameButton").text(),iPrice:$("#iPriceField").val(),iQty:$("#iQtyField").val(),total:parseFloat($("#iPriceField").val())*parseFloat($("#iQtyField").val())};for(let e=0;e<itemArray.length;e++)if(itemArray[e].item_Id===orderDetails.iId&&itemArray[e].item_qty<orderDetails.iQty)return invalidData("We only have "+itemArray[e].item_qty+" "+itemArray[e].item_Name+" 's in the stock!");orderArray.push(orderDetails),itemArray.forEach((e,t)=>{itemArray[t].item_Id===orderDetails.iId&&(itemArray[t].item_qty=itemArray[t].item_qty-parseFloat(orderDetails.iQty),updateItemLocalStorage(itemArray))}),localStorage.setItem(orderData,JSON.stringify(orderArray)),addOrdersToTable(),swal("Done!","Order added successfully!\uD83D\uDCA1","success")}),$("#orderTable").on("click","tbody tr",function(){var e={oId:$(this).children("td:eq(0)").text(),cId:$(this).children("td:eq(1)").text(),iId:$(this).children("td:eq(2)").text(),iName:$(this).children("td:eq(3)").text(),iPrice:$(this).children("td:eq(4)").text(),iQty:$(this).children("td:eq(5)").text(),total:$(this).children("td:eq(6)").text()};$("#updateOrderButton").trigger("click"),$("#uOId").val(e.oId),$("#uCidDropDown").empty(),custArray.forEach(function(e){$("#uCidDropDown").append("<li><a class='dropdown-item'>"+e.customer_id+"</a></li>")}),$("#uIidDropDown").empty(),$("#uInDropDown").empty(),itemArray.forEach(function(e){$("#uIidDropDown").append("<li><a class='dropdown-item'>"+e.item_Id+"</a></li>"),$("#uInDropDown").append("<li><a class='dropdown-item'>"+e.item_Name+"</a></li>")}),$("#upriceField").val(e.iPrice),$("#uqtyField").val(e.iQty),$("#uTotal").val(e.total)}),$("#updateOrdersButton").on("click",()=>{var e={oId:$("#uOId").val(),cId:$("#uCustomerIds").text(),iId:$("#uItemIds").text(),iName:$("#uItemNames").text(),iPrice:$("#upriceField").val(),iQty:$("#uqtyField").val(),total:parseFloat($("#upriceField").val())*parseFloat($("#uqtyField").val())};let t=findOrderIds("#uOId");-1!=t?(orderArray[t]=e,localStorage.setItem(orderData,JSON.stringify(orderArray)),addOrdersToTable(),swal("Done!","Order updated successfully!\uD83D\uDCA1","success")):invalidData()}),$("#uCidDropDown").on("click","li",function(){$("#uCustomerIds").text($(this).text())}),$("#uIidDropDown").on("click","li",function(){$("#uItemIds").text($(this).text())}),$("#uInDropDown").on("click","li",function(){$("#uItemNames").text($(this).text())}),$("#deleteOrderButton").on("click",()=>{let e=findOrderIds("#oId2");-1!=e?(orderArray.splice(e,1),localStorage.setItem(orderData,JSON.stringify(orderArray)),addOrdersToTable(),swal("Done!","Order deleted successfully!\uD83D\uDCA1","success")):invalidData()}),$("#getAllOrdersButton").on("click",()=>{fetchData()}),$("#searchOrderButton").on("click",()=>{let e=findOrderIds("#oidField");-1!=e?($("#infoBody").empty(),$("#exampleModal").modal("show"),$("#modalHeading").empty(),$("#exampleModalLabel").text("Order Details."),$("#infoBody").append($("<h3></h3>").text("ORDER ID : "+orderArray[e].oId)),$("#infoBody").append($("<h3></h3>").text("CUSTOMER ID  : "+orderArray[e].cId)),$("#infoBody").append($("<h3></h3>").text("ITEM ID  : "+orderArray[e].iPrice)),$("#infoBody").append($("<h3></h3>").text("ITEM NAME  : "+orderArray[e].iName)),$("#infoBody").append($("<h3></h3>").text("ITEM PRICE (LKR)  : "+orderArray[e].iPrice)),$("#infoBody").append($("<h3></h3>").text("ITEM QTY  : "+orderArray[e].iQty)),$("#infoBody").append($("<h3></h3>").text("ITEM TOTAL (LKR)  : "+orderArray[e].total))):invalidData()}),addOrdersToTable(),$("#manageInvoices").on("click",()=>{$("#infoBody").empty(),$("#exampleModal").modal("show"),$("#exampleModalLabel").text("Invoice Manager."),$("#infoBody").append("<input placeholder='Enter customer name...' id='csBar' type='text'><br><br>"),$("#infoBody").append("<input placeholder='Enter customer email...' id='emailBar' type='email' ><br><br>"),$("#infoBody").append("<button class='btn btn-primary' id='searchCustomers'>Search</button>")}),$("#infoBody").on("click","#searchCustomers",()=>{let e=findCustName("#csBar");if(-1!=e){$("#infoBody").append("<h4 id='cidInvoice'>Customer ID : "+custArray[e].customer_id+"</h4>");var t=getOrderArray(custArray[e].customer_id);if(0!=t.length){$("#infoBody").append("<h4>Order ID's as per below : </h4>"),t.forEach(function(e){$("#infoBody").append("<h4>ORDER ID : "+orderArray[e].oId+"</h4>")}),$("#infoBody").append("<h4>Total payment details as per below : </h4>");var r=0;t.forEach(function(e){r+=orderArray[e].total}),$("#infoBody").append("<h4 id='totalInInvoice'>Total (LKR) : </h4>"+r),sendEmail(custArray[e].customer_id,custArray[e].customer_name,r)}else swal("OOPS!","No orders found for this customer.\uD83D\uDEA8","error")}else invalidData("Invalid customer name.\uD83D\uDEA8")});